# 📅 TIL - 2025-08-11

## 📌 오늘 한 일

### CLOV 프로젝트 개발 진행
- **화상회의 개별 참가자 음소거 기능 구현**
  - 자신의 마이크 음량을 확인할 수 있는 볼륨바 추가
  - 마이크 음량 조절 슬라이드 바 추가
  - ParticipantList 컴포넌트에서 다른 참가자의 오디오만 선택적으로 음소거하는 기능 추가
  - WebRTC 원격 스트림의 오디오 트랙 제어 로직 구현
  - 자기 자신에게는 음소거 버튼이 표시되지 않도록 UI 개선
  - SideMenu의 이모지를 아이콘으로 변경

---

## 📖 오늘 새롭게 배운 내용

### 🎯 **WebRTC AudioTrack 제어 패턴**
> 개별 참가자의 오디오만 선택적으로 음소거하는 여러 계층의 제어 방법

```javascript
// 1. 트랙 레벨 비활성화
audioTracks.forEach(track => {
  track.enabled = false; // 스트림에서 완전히 차단
});

// 2. 엘리먼트 레벨 음소거  
videoElement.muted = true; // 브라우저 재생 차단

// 3. 볼륨 레벨 제어
videoElement.volume = 0; // 출력 볼륨 조절
```

**핵심 학습:**
- `track.enabled = false`가 가장 근본적인 차단 방법
- 여러 방법을 동시 적용하면 브라우저 호환성 문제 해결 가능
- AudioContext를 활용한 추가적인 오디오 제어도 가능

### 🔍 **DOM 엘리먼트 다중 탐색 전략**
> 동적으로 생성되는 WebRTC 비디오 엘리먼트를 안정적으로 찾는 방법

```javascript
// 방법 1: data-attribute 활용
const element = document.querySelector(`[data-participant-id="${participantId}"]`);

// 방법 2: ID 기반 탐색
const element = document.getElementById(`remote-video-${participantId}`);

// 방법 3: 전역 참조 객체 활용
const element = window.remoteVideoElements[participantId];

// 방법 4: 스트림 속성으로 검증
const videos = document.querySelectorAll('video');
const element = Array.from(videos).find(v => 
  v.srcObject?.getAudioTracks().length > 0
);
```

### ⚡ **조건부 UI 렌더링 최적화**
> 사용자 컨텍스트에 따른 동적 UI 요소 표시/숨김 처리

```javascript
// 자기 자신 구분을 통한 의미 있는 UI 제공
{participant.id !== clientId && (
  <MuteButton /> // 다른 사람에게만 음소거 버튼 표시
)}

{participant.id === clientId && (
  <span className="self-indicator">(나)</span> // 자기 표시
)}
```
