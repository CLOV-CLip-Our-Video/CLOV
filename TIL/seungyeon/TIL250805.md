# ğŸ“… TIL - 2025-08-05

## ğŸ“Œ ì˜¤ëŠ˜ í•œ ì¼

### CLOV í”„ë¡œì íŠ¸ - WebRTC ìŒì„± ì±„íŒ… ê¸°ëŠ¥ ê°œë°œ
- **Mesh ë°©ì‹ WebRTC ìŒì„± ì±„íŒ… êµ¬í˜„**
  - ë§ˆì´í¬ on/off ìƒíƒœë¥¼ canvas-sync ì´ë²¤íŠ¸ì— í¬í•¨í•˜ì—¬ ì°¸ê°€ì ê°„ ë™ê¸°í™”
  
- **ìŒì„± ë³¼ë¥¨ ì‹œê°í™” ì»´í¬ë„ŒíŠ¸ êµ¬í˜„**
  - `VoiceVolumeBar` ì»´í¬ë„ŒíŠ¸ë¡œ ì„¸ë¡œí˜• ì‹¤ì‹œê°„ ìŒì„± ë ˆë²¨ í‘œì‹œ
  - ìƒ‰ìƒ ë³€í™”(ì´ˆë¡â†’ë…¸ë‘â†’ì£¼í™©â†’ë¹¨ê°•)ë¡œ ë³¼ë¥¨ ë‹¨ê³„ ì‹œê°í™”
  - í”¼í¬ ì¸ë””ì¼€ì´í„° ë° ë§í•˜ëŠ” ì¤‘ ê°ì§€ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
  
- **UI/UX ê°œì„ **
  - ì¹´ë©”ë¼/ë§ˆì´í¬ ë²„íŠ¼ì„ ê·¸ë¼ë””ì–¸íŠ¸ ìŠ¤íƒ€ì¼ë¡œ ì¬ë””ìì¸
  - VideoPreviewì™€ VolumeBarë¥¼ ë‚˜ë€íˆ ë°°ì¹˜í•˜ëŠ” ë ˆì´ì•„ì›ƒ êµ¬í˜„
  - ë§ˆì´í¬ ìƒíƒœ ì•„ì´ì½˜ì„ ParticipantListì— ì¶”ê°€

- **ì˜¤ë””ì˜¤ í’ˆì§ˆ ìµœì í™”**
  - getUserMedia ì˜¤ë””ì˜¤ ì œì•½ì¡°ê±´ ìµœì í™” (AGC ë¹„í™œì„±í™”ê°€ í•µì‹¬)
  - í™˜ê²½ë³„(studio/quiet/normal/noisy) ì˜¤ë””ì˜¤ ì„¤ì • í”„ë¦¬ì…‹ êµ¬í˜„
  - ì‹¤ì‹œê°„ ì˜¤ë””ì˜¤ í’ˆì§ˆ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ê°œë°œ

---

## ğŸ“– ì˜¤ëŠ˜ ìƒˆë¡­ê²Œ ë°°ìš´ ë‚´ìš©

### ğŸ¤ **WebRTC ì˜¤ë””ì˜¤ ì²˜ë¦¬ í•µì‹¬ ê°œë…**
> getUserMediaì˜ ì˜¤ë””ì˜¤ ì œì•½ì¡°ê±´ì´ ìŒì§ˆì— ë¯¸ì¹˜ëŠ” ì˜í–¥

**AGC(Auto Gain Control) ë¹„í™œì„±í™”ì˜ ì¤‘ìš”ì„±:**
```javascript
// ìŒì§ˆ ë‚˜ì¨
audio: {
  autoGainControl: true,  // AGCê°€ ìŒì§ˆì„ ë§ì¹¨!
  sampleRate: 48000,
}

// ìŒì§ˆ ê°œì„   
audio: {
  sampleRate: { ideal: 48000, min: 44100 },
  sampleSize: { ideal: 24 },
  autoGainControl: { ideal: false },  // í•µì‹¬!
  echoCancellation: { ideal: false }, // ì¡°ìš©í•œ í™˜ê²½ì—ì„œ
}
```

### ğŸµ **MediaStreamê³¼ MediaStreamTrack êµ¬ì¡°**

```javascript
// MediaStream = ì•¨ë²” (ì»¨í…Œì´ë„ˆ)
// MediaStreamTrack = ê³¡ (ì‹¤ì œ ë°ì´í„°)
const stream = await getUserMedia({ video: true, audio: true });
const audioTrack = stream.getAudioTracks()[0]; // ì²« ë²ˆì§¸ ì˜¤ë””ì˜¤ íŠ¸ë™
audioTrack.enabled = false; // íŠ¸ë™ ë¹„í™œì„±í™” (ìŒì†Œê±°)
```

**í•µì‹¬ ê¹¨ë‹¬ìŒ:**
- íŠ¸ë™ì€ "ê³µê°„"ì´ ì•„ë‹ˆë¼ "ì‹¤ì œ ë¯¸ë””ì–´ ë°ì´í„°"
- ê° ì‚¬ìš©ìëŠ” ë…ë¦½ì ì¸ ìŠ¤íŠ¸ë¦¼ì„ ê°€ì§
- `track.enabled`ë¡œ ì œì–´í•˜ëŠ” ê²ƒì´ `addTrack`ë³´ë‹¤ íš¨ìœ¨ì 

### ğŸ”„ **ìƒíƒœ ë™ê¸°í™” íŒ¨í„´**
> RoomInfoì™€ RecordingCanvas ëª¨ë‘ì—ì„œ ë§ˆì´í¬ ìƒíƒœ ì „ì†¡ í•„ìš”

**ë¬¸ì œ:** íˆ¬ëª…ë„/í¬ê¸° ì¡°ì ˆ ì‹œ ë§ˆì´í¬ ìƒíƒœê°€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
**ì›ì¸:** `updateMyState`ì™€ `updateMyPosition`ì— `isMicOn` ëˆ„ë½
**í•´ê²°:**
```javascript
const updatedState = {
  ...currentState,
  scale: size / 100,
  opacity: transparency / 100,
  mode: cameraMode,
  filter: selectedFilter?.name || null,
  isMicOn: isMicOn, // ğŸ†• ì¶”ê°€!
};
```
