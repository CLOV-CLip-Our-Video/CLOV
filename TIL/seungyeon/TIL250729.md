# 📅 TIL - 2025-07-29

## 📌 오늘 한 일

### CLOV 프로젝트 개발 진행
- **SideMenu에서 선택한 필터 적용 기능 구현**
  - 이벤트 리스너를 통한 SideMenu ↔ RecordingCanvas 통신
  - RoomInfo 웹캠 미리보기 필터 적용
    - SideMenu와 동일한 필터 상태 공유
  - 페이지 이동 시 저장된 필터 상태 복원 로직 구현
  - 비디오 로드 완료 후 필터 적용 타이밍 최적화
    - 너무 빠르면 적용이 안 되는 문제가 있어서 로드 확인 후 적용되게 함

- **SaveModal 다운로드 기능**
  - 촬영된 미디어 미리보기 (사진/영상 구분)
  - Blob URL을 통한 브라우저 다운로드 구현
  - 파일 정보 표시 (크기, 시간, 타입)
  - 잘 작동하는지는 RecordingRoom의 촬영 기능과 연동해 봐야 함...

- **상태 관리 최적화**
  - roomStore에서 실제 roomCode 연동
  - isConnected 상태를 통한 방 상태 표시
  - participant 인원 수와 방 정보 연동

---

## 📖 오늘 새롭게 배운 내용

### 🎨 **이벤트 기반 컴포넌트 통신**
> React에서 서로 다른 컴포넌트 간 실시간 상태 동기화를 위한 CustomEvent 패턴

```javascript
// 발송자 (SideMenu)
window.dispatchEvent(
  new CustomEvent('filterChanged', {
    detail: { filter: item, isPreview: false }
  })
);

// 수신자 (RecordingCanvas, RoomInfo)
useEffect(() => {
  const handleFilterChanged = (event) => {
    const { filter } = event.detail;
    applyFilterToCanvas(canvasRef.current, filter);
  };
  
  window.addEventListener('filterChanged', handleFilterChanged);
  return () => window.removeEventListener('filterChanged', handleFilterChanged);
}, []);
```
