# TIL - 2025ë…„ 7ì›” 23ì¼

## ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼ ì—°ê²° ë¬¸ì œ í•´ê²°

### ë¬¸ì œ ìƒí™©

- `useCamera` í›…ì—ì„œ `getUserMedia()`ë¡œ ìŠ¤íŠ¸ë¦¼ì„ ë°›ì•„ì™”ì§€ë§Œ `<video>` íƒœê·¸ì— í™”ë©´ì´ ì¶œë ¥ë˜ì§€ ì•ŠìŒ
- ì½˜ì†”ì— ë‹¤ìŒ ê²½ê³  ì¶œë ¥:
  ```
  [useCamera] getUserMedia ì„±ê³µ: MediaStream
  [useCamera] videoRefê°€ ìœ íš¨í•˜ì§€ ì•ŠìŒ
  ```

### ì›ì¸ ë¶„ì„

- `<video>`ì˜ DOM ìš”ì†Œê°€ ì•„ì§ ë§ˆìš´íŠ¸ë˜ê¸° ì „ì— `videoRef.current.srcObject = stream`ì„ í˜¸ì¶œí•¨
- ì´ë¡œ ì¸í•´ `videoRef.current`ëŠ” `null`ì¸ ìƒíƒœ â†’ ìŠ¤íŠ¸ë¦¼ì´ ì—°ê²°ë˜ì§€ ì•ŠìŒ

### í•´ê²° ë°©ë²•

- `<video>`ê°€ DOMì— ë Œë”ë§ë˜ê³  ë‚˜ì„œ ìŠ¤íŠ¸ë¦¼ì„ ì—°ê²°í•´ì•¼ í•˜ë¯€ë¡œ, `videoRef`ì™€ `currentStream`ì´ ëª¨ë‘ ìœ íš¨í•  ë•Œ ì—°ê²°í•˜ë„ë¡ `useEffect` ë¶„ë¦¬

```tsx
useEffect(() => {
  if (videoRef.current && currentStream) {
    /* console.log("[useCamera] videoRef ì¤€ë¹„ë¨ â†’ ìŠ¤íŠ¸ë¦¼ ì—°ê²°"); */
    videoRef.current.srcObject = currentStream;
  }
}, [currentStream]);
```

- ê¸°ì¡´ `startCamera()` ì•ˆì—ì„œ `videoRef.current.srcObject = stream` ë¶€ë¶„ì€ ì œê±°

### ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ ì •ë¦¬

- `ref.current`ëŠ” ë Œë”ë§ í›„ì—ë§Œ DOM ìš”ì†Œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ˆê¸°í™” ì‹œì ì— ì ‘ê·¼í•˜ë©´ `null`ì¼ ìˆ˜ ìˆìŒ
- MediaStreamì„ `<video>`ì— ì—°ê²°í•  ë•ŒëŠ” ë°˜ë“œì‹œ DOMì´ ì¤€ë¹„ëœ í›„ ì—°ê²°í•´ì•¼ ì•ˆì „
- `useEffect`ë¥¼ í†µí•´ `videoRef.current`ì™€ `MediaStream`ì´ ëª¨ë‘ ìœ íš¨í•  ë•Œ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì•ˆì •ì 
- Reactì˜ `useRef`ëŠ” ë¦¬ë Œë”ë¥¼ ìœ ë°œí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì˜ì¡´ì„± ë°°ì—´ì— `ref` ìì²´ëŠ” ë„£ì„ í•„ìš” ì—†ìŒ (`ref.current` ë³€í™”ëŠ” íŠ¸ë˜í‚¹ë˜ì§€ ì•ŠìŒ)

### ğŸ›  ë¦¬íŒ©í† ë§ ìš”ì•½

| í•­ëª©             | ë³€ê²½ ì „                    | ë³€ê²½ í›„                      |
| ---------------- | -------------------------- | ---------------------------- |
| ìŠ¤íŠ¸ë¦¼ ì—°ê²° ìœ„ì¹˜ | `startCamera()` ë‚´ë¶€       | `useEffect([currentStream])` |
| ì—ëŸ¬ ë¡œê·¸        | `videoRefê°€ ìœ íš¨í•˜ì§€ ì•ŠìŒ` | ì‚¬ë¼ì§                       |
| ê²°ê³¼             | ì¹´ë©”ë¼ í™”ë©´ ì •ìƒ ì¶œë ¥      | âœ…                           |
