# TIL - 2025년 8월 1일

## React에서 데이터 저장소 선택 기준

### 1. sessionStorage

- **세션(탭) 단위**로 데이터 유지. 탭 닫으면 삭제.
- 새로고침 시 유지되지만, 브라우저 종료 또는 탭 닫으면 사라짐.
- **사용 예시 (CLOV)**
  - 방 코드(`roomCode`), 클라이언트 ID(`clientId`), 닉네임, 호스트 여부
  - 방 생성/참여 후 WebSocket 연결에 필요한 인증 정보
- **장점**: 탭 단위 분리, 새로고침해도 유지
- **주의**: 다른 탭과 공유 불가
- ***

### 2. localStorage

- 브라우저 전체에서 **영구 저장**. 직접 삭제 전까지 남음.
- **사용 예시 (CLOV)**
  - 카메라·마이크 기본 설정
  - 최근 사용한 배경, 필터
  - UI 테마나 언어 설정
- **장점**: 재방문 시 유지, 모든 탭에서 공유
- **주의**: 민감한 정보 저장 금지 (보안 취약)

---

### 3. 단순 변수 (useState, 컴포넌트 스코프)

- **컴포넌트 내부에서만** 사용, 리렌더나 새로고침 시 초기화.
- **사용 예시 (CLOV)**
  - 모달 열림/닫힘 상태
  - UI 탭 선택값
  - 카운트다운 진행 여부
- **장점**: 간단하고 빠름
- **주의**: 새로고침 시 복구 불가

---

### 4. 전역 상태 스토어 (Zustand 등)

- 앱 전역에서 공유되는 상태 관리.
- 필요 시 `persist` 미들웨어로 sessionStorage/localStorage 연동 가능.
- **사용 예시 (CLOV)**
  - 참가자 위치·크기·투명도(`canvasParticipantsStore`)
  - 방 정보(`roomStore`)
  - 녹화 상태(`recordingStore`)
- **장점**: 컴포넌트 간 공유·실시간 동기화 용이
- **주의**: 너무 많은 데이터 저장 시 불필요한 리렌더 발생

---

## 배운 점

- 저장소 선택은 **데이터의 수명 주기**와 **공유 범위**에 따라 결정해야 한다.
- CLOV에서는 세션성 데이터와 장기 데이터가 명확히 구분되므로, 혼용 시 규칙을 정해두면 유지보수성이 높아진다.
- 특히 실시간 동기화가 필요한 데이터는 전역 스토어, 그 외 환경설정·기본값은 localStorage, 인증·방 정보는 sessionStorage가 적합하다.
