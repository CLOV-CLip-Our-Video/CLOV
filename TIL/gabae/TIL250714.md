# TIL - 2025-07-14 (프로젝트 / 쿠버네티스 / 회의 / JPA 복습)
## 1. 프로젝트 진행 상황
### 1.1 기획
### 1) 차밍 포인트
- 친구들과 웹캠으로 실시간 포토부스처럼 촬영 (WebRTC)
- VHS, 폴라로이드, 하트 등 SNS 최적화 테마 제공

### 2) 페인 포인트
- 포토부스를 직접 못 가는 상황(지방, 해외, 바쁨)
- 온라인 촬영은 각자 따로 놀아서 협동이 없음
- 후편집, 사이즈 맞추기 번거로움

### 3) 기능 제한 고민
- 방장과 참여자 기능을 어디까지 허용할지 조율 필요

### 4) 간단한 MVP 테스트 완료

---
### 1.2 컨벤션 및 플로우
### 1) 컨벤션
- 커밋, 깃, PR, 코드 컨벤션 및 코드 리뷰 룰 완료

### 2) 서비스 흐름 기본 완성, 플로우 차트 완성
- 방 생성 → 초대 → 배경/카메라 → 촬영 → 저장 및 공유
- 방 참가 → 코드/QR → 방 존재 확인 → 입장 → 촬영 → 저장 및 공유

---
### 1.3 UI/UX
### 1) 피그마
- 온보딩, 접속 화면 대략 스케치 완료

### 2) 사용자 친화성
- 예쁜 UI = 사용자가 버튼, 필터를 쉽게 찾을 수 있는 구조

---
## 2. 오늘 회의 핵심 정리
### 2.1 개발 및 배포 전략
1. 4주차까지 MVP 완성, 작게라도 먼저 배포
2. 필터 속도 최적화는 후순위, 배포 후 패치 노트 방식으로 자주 업데이트
3. 현대 SW처럼 빠른 개선 주기 유지

### 2.2 성능 및 부하 테스트
1. 유저 몰림으로 bottleneck 발생 시 이를 개선 사례로 활용
2. 순간적인 peak 대비, 유저 접속 실패 경험도 어필 가능
3. 봇으로 방 100개, 방당 4명 정도 시뮬레이션
4. 소켓 고갈 가능성 검토

### 2.3 오늘 논의된 고민
1. 회원가입은 현재 서비스에 필수적이지 않음
2. GA, 로그 스택 구성해 사용자 행동 데이터 수집
3. 웹캠 기반이라 봇 테스트 한계 → 사람 나오는 무료 영상으로 시뮬
4. 스트레스를 주는 프레임워크로 부하 테스트 계획

---
## 3. 쿠버네티스 핵심 정리
### 3.1 필요성
- 수백~수천 개의 컨테이너를 자동으로 배포, 운영, 확장, 복구
- 무중단 배포, 오토스케일링, 장애 복구 자동화

### 3.2 기본 구조
- LoadBalancer → Ingress → Pod
- HPA(Horizontal Pod Autoscaler), NA(Node Autoscaler)로 트래픽 증가 시 Pod 및 Node 자동 확장

### 3.3 3-Tier Architecture
- Presentation / Business / Data 계층을 Pod으로 분리해 유지보수 및 확장에 유리
---
## 4. 앞으로 계획
1. 작은 기능 단위로 만들어 빠르게 배포하고 확인, 개선
2. 사용자에게 패치 노트 형태로 지속적으로 업데이트
---
## 5. JPA 복습 정리
- JPA 구동 방식 정리
- JPA에서 데이터를 변경하는 모든 작업은 꼭 트랜잭션이라는 단위 안에서 작업되어야 한다.
- 엔티티 매니저 팩토리는 하나만 생성해서 애플리케이션 전체에서 공유
- 엔티티 매니저는 쓰레드 간에 공유X , 사용하고 버려야( em.close(); ) 한다.

### JPQL
- 테이블이 아닌 객체를 대상으로 하는 검색 지향 쿼리(객체지향 SQL)
- 즉, JPA는 SQL을 추상화한 **JPQL**이라는 객체 지향 쿼리 언어 제공
- SQL을 추상화해서 특정 데이터베이스 SQL에 의존X
- JPA를 사용하면 엔티티 객체를 중심으로 개발,
  - 문제는 검색쿼리인데, 검색 시에도 테이블이 아닌 엔티티 객체를 대상으로 검색
  - 모든 DB 데이터를 객체로 변환해서 검색하는 것은 불가능. 
  - 애플리케이션이 필요한 데이터만 DB에서 불러오려면, 결국 검색 조건이 포함된 SQL이 필요 → JPQL
- SQL과 문법 유사, SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN 지원

- **JPQL과 SQL차이점**
   - JPQL은 엔티티 객체를 대상으로 쿼리
   - SQL은 데이터베이스 테이블을 대상으로 쿼리